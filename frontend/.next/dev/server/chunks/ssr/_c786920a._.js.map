{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/Mini%20Project/CampusNexus/frontend/lib/api.js"],"sourcesContent":["// Frontend API Client for CampusNexus\r\n// Communicates with Django backend\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\r\n\r\nclass ApiClient {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n    this.token = null;\r\n    \r\n    // Try to load token from localStorage if in browser\r\n    if (typeof window !== 'undefined') {\r\n      this.token = localStorage.getItem('authToken');\r\n    }\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n    if (typeof window !== 'undefined') {\r\n      if (token) {\r\n        localStorage.setItem('authToken', token);\r\n      } else {\r\n        localStorage.removeItem('authToken');\r\n      }\r\n    }\r\n  }\r\n\r\n  clearToken() {\r\n    this.token = null;\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('authToken');\r\n    }\r\n  }\r\n\r\n  getHeaders(customHeaders = {}) {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      ...customHeaders,\r\n    };\r\n\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const config = {\r\n      ...options,\r\n      headers: this.getHeaders(options.headers),\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(url, config);\r\n      \r\n      // Handle different response types\r\n      const contentType = response.headers.get('content-type');\r\n      let data;\r\n      \r\n      if (contentType && contentType.includes('application/json')) {\r\n        data = await response.json();\r\n      } else {\r\n        data = await response.text();\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || data.error || `HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async get(endpoint) {\r\n    return this.request(endpoint, { method: 'GET' });\r\n  }\r\n\r\n  async post(endpoint, data) {\r\n    return this.request(endpoint, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async put(endpoint, data) {\r\n    return this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async patch(endpoint, data) {\r\n    return this.request(endpoint, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async delete(endpoint) {\r\n    return this.request(endpoint, { method: 'DELETE' });\r\n  }\r\n\r\n  // Convenience method for form data (file uploads)\r\n  async postFormData(endpoint, formData) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const headers = {};\r\n    \r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n    // Don't set Content-Type for FormData - browser will set it with boundary\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers,\r\n        body: formData,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || data.error || `HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nconst apiClient = new ApiClient();\r\n\r\nexport default apiClient;\r\n\r\n// Named exports for convenience\r\nexport const {\r\n  get: apiGet,\r\n  post: apiPost,\r\n  put: apiPut,\r\n  patch: apiPatch,\r\n  delete: apiDelete,\r\n  setToken,\r\n  clearToken,\r\n  postFormData: apiPostFormData,\r\n} = apiClient;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/Mini%20Project/CampusNexus/frontend/context/AuthContext.js"],"sourcesContent":["// original: N/A - new file for authentication context\r\n// Auth Context for CampusNexus Frontend\r\n// Manages user authentication state across the application\r\n\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\nimport apiClient from '../lib/api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Check for existing session on mount\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const token = typeof window !== 'undefined' ? localStorage.getItem('authToken') : null;\r\n      \r\n      if (token) {\r\n        apiClient.setToken(token);\r\n        // TODO: Implement endpoint to verify token and fetch user info\r\n        // For now, we'll decode basic user info from token or fetch from API\r\n        try {\r\n          // TODO: Call /api/auth/me or similar endpoint\r\n          // const userData = await apiClient.get('/api/auth/me');\r\n          // setUser(userData);\r\n          \r\n          // Temporary: Just mark as authenticated if token exists\r\n          setUser({ authenticated: true });\r\n        } catch (error) {\r\n          console.error('Auth check failed:', error);\r\n          apiClient.clearToken();\r\n          setUser(null);\r\n        }\r\n      }\r\n      \r\n      setLoading(false);\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const login = async (email, password, role) => {\r\n    try {\r\n      // TODO: Update this endpoint to match your Django backend\r\n      // Current Django endpoint: POST /login/ (returns rendered template)\r\n      // Need to create: POST /api/auth/login/ (returns JSON with token)\r\n      \r\n      const response = await apiClient.post('/api/auth/login/', {\r\n        email,\r\n        password,\r\n        role,\r\n      });\r\n\r\n      // Assuming backend returns { token, user }\r\n      if (response.token) {\r\n        apiClient.setToken(response.token);\r\n        setUser(response.user);\r\n        return { success: true };\r\n      }\r\n      \r\n      throw new Error('Login failed - no token received');\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const signup = async (userData) => {\r\n    try {\r\n      // TODO: Update to match Django backend\r\n      // Current: POST /signup/ (returns rendered template)\r\n      // Need: POST /api/auth/signup/ (returns JSON)\r\n      \r\n      const response = await apiClient.post('/api/auth/signup/', userData);\r\n      \r\n      // Typically signup might auto-login or require email verification\r\n      return { success: true, data: response };\r\n    } catch (error) {\r\n      console.error('Signup error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    apiClient.clearToken();\r\n    setUser(null);\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/auth/login';\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    login,\r\n    signup,\r\n    logout,\r\n    isAuthenticated: !!user,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n// SECURITY NOTE FOR DEVELOPERS:\r\n// This implementation uses localStorage for token storage which is vulnerable to XSS attacks.\r\n// For production:\r\n// 1. Consider using httpOnly cookies for token storage (requires backend changes)\r\n// 2. Implement token refresh mechanism\r\n// 3. Add CSRF protection\r\n// 4. Use secure, httpOnly, sameSite cookies\r\n// 5. Implement proper session management\r\n// 6. Add rate limiting on authentication endpoints\r\n"],"names":[],"mappings":"AAAA,sDAAsD;AACtD,wCAAwC;AACxC,2DAA2D;;;;;;;;AAE3D;AACA;;;;AAEA,MAAM,4BAAc,IAAA,oHAAa;AAE1B,SAAS;IACd,MAAM,UAAU,IAAA,iHAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,sCAAsC;IACtC,IAAA,gHAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,QAAQ,sCAAgC,0BAAoC;YAElF;;YAkBA,WAAW;QACb;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAO,UAAU;QACpC,IAAI;YACF,0DAA0D;YAC1D,oEAAoE;YACpE,kEAAkE;YAElE,MAAM,WAAW,MAAM,8GAAS,CAAC,IAAI,CAAC,oBAAoB;gBACxD;gBACA;gBACA;YACF;YAEA,2CAA2C;YAC3C,IAAI,SAAS,KAAK,EAAE;gBAClB,8GAAS,CAAC,QAAQ,CAAC,SAAS,KAAK;gBACjC,QAAQ,SAAS,IAAI;gBACrB,OAAO;oBAAE,SAAS;gBAAK;YACzB;YAEA,MAAM,IAAI,MAAM;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,MAAM,SAAS,OAAO;QACpB,IAAI;YACF,uCAAuC;YACvC,qDAAqD;YACrD,8CAA8C;YAE9C,MAAM,WAAW,MAAM,8GAAS,CAAC,IAAI,CAAC,qBAAqB;YAE3D,kEAAkE;YAClE,OAAO;gBAAE,SAAS;gBAAM,MAAM;YAAS;QACzC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,MAAM,SAAS;QACb,8GAAS,CAAC,UAAU;QACpB,QAAQ;QACR;;IAGF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA,iBAAiB,CAAC,CAAC;IACrB;IAEA,qBAAO,qKAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C,EAEA,gCAAgC;CAChC,8FAA8F;CAC9F,kBAAkB;CAClB,kFAAkF;CAClF,uCAAuC;CACvC,yBAAyB;CACzB,4CAA4C;CAC5C,yCAAyC;CACzC,mDAAmD"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saman/OneDrive/Desktop/Mini%20Project/CampusNexus/frontend/pages/_app.js"],"sourcesContent":["// original: N/A - new Next.js app wrapper\r\nimport { AuthProvider } from '../context/AuthContext';\r\nimport '../styles/globals.css';\r\n\r\nfunction MyApp({ Component, pageProps }) {\r\n  return (\r\n    <AuthProvider>\r\n      <Component {...pageProps} />\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default MyApp;\r\n"],"names":[],"mappings":"AAAA,0CAA0C;;;;;;AAC1C;;;;AAGA,SAAS,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE;IACrC,qBACE,qKAAC,+HAAY;kBACX,cAAA,qKAAC;YAAW,GAAG,SAAS;;;;;;;;;;;AAG9B;uCAEe"}}]
}